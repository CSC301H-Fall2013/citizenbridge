Code modified from tutorial at: http://forums.devshed.com/php-faqs-and-stickies-167/how-to-program-a-basic-but-secure-login-system-using-891201.html

Setup in phpMyAdmin:


0 Create Database:
Database name: levuca_account
Collation: utf8_unicode_ci


1: Create Database User:
username = levuca_citizen
password = citizenbridge
Permissions: Select, Insert, Update

Use localhost as host



3: Create Table: Use this SQL code (SQL Tab)

CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `first` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `last`varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password` char(64) COLLATE utf8_unicode_ci NOT NULL,
  `salt` char(16) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `postalcode` char(6) COLLATE utf8_unicode_ci NOT NULL,
  `active` int(1) COLLATE utf8_unicode_ci NOT NULL DEFAULT 0,
  UNIQUE KEY (`id`),
  PRIMARY KEY (`email`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1;
CREATE TABLE `validation` (
	`email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
	`key` char(64) COLLATE utf8_unicode_ci NOT NULL,
) ENGINE=InnoDB	DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci
CREATE TABLE `fbills` (
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `bid` int(10) COLLATE utf8_unicode_ci NOT NULL,
  FOREIGN KEY (`email`) REFERENCES users(`email`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `freps` (
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `rid` int(10) COLLATE utf8_unicode_ci NOT NULL,
  FOREIGN KEY (`email`) REFERENCES users(`email`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `vbills` (
  `upvote` int(10) COLLATE utf8_unicode_ci NOT NULL,
  `downvote` int(10) COLLATE utf8_unicode_ci NOT NULL,
  `bid` int(10) COLLATE utf8_unicode_ci NOT NULL,
  `updatedate` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`bid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


TODO: Upvote Downvote identity for each user